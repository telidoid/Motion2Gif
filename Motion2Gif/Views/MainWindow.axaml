<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:vm="using:Motion2Gif.ViewModels"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vlc="using:LibVLCSharp.Avalonia"
        xmlns:mediaTimelineControl1="clr-namespace:Motion2Gif.Controls.MediaTimelineControl"
        xmlns:rangeSelectorControl="clr-namespace:Motion2Gif.Controls.RangeSelectorControl"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        Width="600" Height="453"
        x:Class="Motion2Gif.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Motion2Gif"
        Icon="/Assets/png/Motion2Gif_M2GF_128.png">
    <Window.Styles>
        <Style Selector="vlc|VideoView">
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto,Auto">
        <StackPanel Grid.Row="0" Orientation="Horizontal">
            <Button Content="Choose a file" Command="{Binding OpenVideoFileCmd}" />
        </StackPanel>

        <vlc:VideoView Grid.Row="1" x:Name="VideoView" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />

        <Grid Grid.Row="2" Margin="20 0">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" ClipToBounds="False" Background="Transparent">
                <ScrollViewer.Styles>
                    <Style Selector="ScrollViewer /template/ ScrollContentPresenter">
                        <Setter Property="ClipToBounds" Value="False" />
                    </Style>
                </ScrollViewer.Styles>

                <Grid x:Name="TimelineGrid"
                      Height="70"
                      Margin="0 0 0 20"
                      RowDefinitions="*, *"
                      ClipToBounds="False"
                      Background="Transparent">

                    <mediaTimelineControl1:TimelineControl
                        Grid.Row="0"
                        CurrentTimePosition="{Binding CurrentPosition}"
                        MediaDuration="{Binding MediaDuration}" />

                    <rangeSelectorControl:TimeRangeSelector
                        Grid.Row="1"
                        Min="{Binding SelectorMin}"
                        Max="{Binding MediaDuration}"
                        TrimStart="{Binding TrimStart}"
                        TrimEnd="{Binding TrimEnd}"
                        ClipToBounds="False"
                        ZIndex="1" />

                    <mediaTimelineControl1:MediaTimeline
                        Grid.Row="1"
                        CurrentTimePosition="{Binding CurrentPosition}"
                        MediaDuration="{Binding MediaDuration}" />
                </Grid>
            </ScrollViewer>
        </Grid>

        <StackPanel Grid.Row="3" Orientation="Horizontal">
            <Button Command="{Binding TogglePlayCmd}">
                <PathIcon Data="{StaticResource play_regular}" />
            </Button>

            <Button Command="{Binding StopCmd}">
                <PathIcon Data="{StaticResource stop_regular}"></PathIcon>
            </Button>

            <TextBlock VerticalAlignment="Center" Text="{Binding DisplayedTime}" />
            
            <Button Click="ZoomIn_OnClick">
                <PathIcon Data="{StaticResource zoom_in_regular}" />
            </Button>

            <Button Click="ZoomOut_OnClick">
                <PathIcon Data="{StaticResource zoom_out_regular}" />
            </Button>
            
            <ToggleButton Command="{Binding ToggleMuteCmd}">
                <PathIcon Data="{StaticResource speaker_regular}"></PathIcon>
            </ToggleButton>

            <Slider Width="80" Minimum="0" Maximum="100" Value="{Binding Volume}" />
        </StackPanel>
    </Grid>
</Window>